<!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="/public/style.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Friend Finder</title>
</head>

<body>
    <!-- survey body  -->
    <div class="container">
        <div class="row">
            <div class="col s12">
                <h3>Survey Questions<span>&nbsp;&nbsp;&nbsp;&nbsp;| <a href="/" style="color: #673ab7; text-decoration: none;"><i
                                class="material-icons small">home</i></a></span></h3>

                <hr>
            </div>
        </div>
        <!-- name input -->
        <form method="POST" role="form">
            <div class="row">
                <div class="col s12">
                    <h4>About You</h4>
                    <h5>Name (Required)</h5>
                    <div class="row">

                        <div class="input-field col s5 m6">
                            <input id="first_name" type="text" class="validate" required>
                            <label for="first_name">First Name</label>
                        </div>
                        <div class="input-field col s5 m6">
                            <input id="last_name" type="text" class="validate" required>
                            <label for="last_name">Last Name</label>
                        </div>
                    </div>

                </div> <!-- form end -->
            </div> <!-- col div end -->


            <div class="row">
                <div class='col s12'>
                    <h5>Link to Photo Image (Required)</h5>

                    <div class="input-field col s12">
                        <textarea id="photoLink" class="materialize-textarea" required></textarea>
                        <label for="photoLink">Url</label>
                    </div>
                </div>
            </div>

            <!-- QUESTIONS -->
            <div class="row">


                <div class="col l6  s9 xl6 ">
                    <h5>Question 1</h5>
                    <h6>Your mind is always buzzing with unexplored ideas and plans.</h6>
                    <select id="question-one" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question one</label>
                </div>

                <div class="col l6  s9 xl6">
                    <h5>Question 2</h5>
                    <h6>Generally speaking, you rely more on your experience than your imagination.</h6>
                    <select id="question-two" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-two</label>
                </div>
            </div>
            <div class="row">

                <div class="col l6  s9 xl6">
                    <h5>Question 3</h5>
                    <h6>You find it easy to stay focused when there is pressure.</h6>
                    <select id="question-three" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-three</label>
                </div>


                <div class="col l6  s9 xl6">
                    <h5>Question 4</h5>
                    <h6>You rarely do something just out of sheer curiosity.</h6>
                    <select id="question-four" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-four</label>
                </div>
            </div>
            <div class="row">

                <div class="col l6  s9 xl6">
                    <h5>Question 5</h5>
                    <h6>People can rarely upset you.</h6>
                    <select id="question-five" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-five</label>
                </div>
                <div class="col l6  s9 xl6">
                    <h5>Question 6</h5>
                    <h6>It is often difficult for you to relate to other people’s feelings.</h6>
                    <select id="question-six" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-six</label>
                </div>
            </div>
            <div class="row">

                <div class="col l6  s9 xl6">
                    <h5>Question 7</h5>
                    <h6>In a discussion, truth should be more important than people’s sensitivities.</h6>
                    <select id="question-seven" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-seven</label>
                </div>
                <div class="col l6  s9 xl6">
                    <h5>Question 8</h5>
                    <h6>You rarely get carried away by fantasies and ideas.</h6>
                    <select id="question-eight" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-eight</label>
                </div>
            </div>
            <div class="row">

                <div class="col l6  s9 xl6">
                    <h5>Question 9</h5>
                    <h6>You think that everyone’s views should be respected regardless of whether they are supported by
                        facts or not.</h6>
                    <select id="question-nine" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-nine</label>
                </div>
                <div class="col l6  s9 xl6">
                    <h5>Question 10</h5>
                    <h6>You feel more energetic after spending time with a group of people.</h6>
                    <select id="question-ten" class="question" required>
                        <option value="" disabled selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>

                    </select>
                    <label>Question-ten</label>
                </div>
            </div>
            <!--ending question div tag-->
            <div class="row">
                <div class="col s12">
                    <button class="btn-large waves-effect waves-light btn modal-trigger" data-target="modal1"  type="submit"
                        name="submit" id="submitBtn">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </div>

            </div>
        </form>
        <!--end of long form -->
        <hr>
        <!-- footer with api links -->
        <footer class="footer">
            <div class="row">
                <p>
                    <a href="/api/friends">API Friends List</a> |
                    <a href="https://github.com/Baritonedad89/friend-finder" target="_blank">Github Repo</a>
                </p>
            </div>
        </footer>


        <div id="modal1" class="modal">
            <div class="modal-content">
                <h4>Here's your new bestfriend!</h4>
                <h5 id="matchName"></h5>
                <img id="matchPic" src="" alt="No Image" width=250px>
            </div>
            <div class="modal-footer">
                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Done</a>
            </div>
        </div>

    </div><!-- container end div-->





    <!-- Compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });
    </script>

    <script type="text/javascript">
        // reset form on submit button click 
        const resetForm = () => {
            $('form').trigger('reset')

        };
        $(document).ready(function () {

            $('#submitBtn').on('click', (event) => {
                event.preventDefault();
                const newFriend = {
                    name: `${$('#first_name').val().trim()} ${$('#last_name').val().trim()}`,
                    photo: $('#photoLink').val().trim(),
                    scores: [
                        $('#question-one').val().trim(),
                        $('#question-two').val().trim(),
                        $('#question-three').val().trim(),
                        $('#question-four').val().trim(),
                        $('#question-five').val().trim(),
                        $('#question-six').val().trim(),
                        $('#question-seven').val().trim(),
                        $('#question-eight').val().trim(),
                        $('#question-nine').val().trim(),
                        $('#question-ten').val().trim(),

                    ]
                }
                console.log(newFriend)
                const currentURL = window.location.origin;
                $.post(`${currentURL}/api/friends`, newFriend, function (data) {
                    if (data) {
                        $("#matchName").text(data.name);
                        $("#matchPic").attr("src", data.photo);
                    }
                })
                
                $('.modal').modal();

                resetForm();
            });
        });
    </script>
</body>

</html>